<%@ page contentType="text/html; charset=UTF-8"%>
<%@ taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core"%>
<%
	request.setCharacterEncoding("UTF-8");
String cp = request.getContextPath();
%>
<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>ClubCreate.jsp</title>
<script type="text/javascript"
	src="http://code.jquery.com/jquery.min.js"></script>

<script type="text/javascript" src="http://code.jquery.com/jquery.min.js"></script>
<script type="text/javascript" src="<%=cp%>/js/jquery-ui.js"></script>

<script type="text/javascript">
   //$();   // jquery();    // 달러는 제이쿼리 객체를 말하는 것!
   $(document).ready(function()
   {
      
      // Ajax 요청 및 응답 처리 한 번 더 (처음 로드했을 때 기본급 백만나오게하기 위함)
      ajaxRequest();
      
      // jQuery-UI 캘린더를 불러오는 함수 처리(datepicker())
      $("#birthday").datepicker(
      {
         dateFormat:"yy-mm-dd"
         , changeMonth: true
         , changeYear: true
      });
      
      // 직위(select)의 선택도니 내용이 변경되어을 경우 수행해야 할 코드 처리
      $("#positionId").change(function()
      {
         //테스트
         //alert("직위 변경");
         
         // Ajax 요청 및 응답 처리
         ajaxRequest();
         
      });
      // 직원 추가 버튼이 클릭되었을 때 수행해야 할 코드 처리
      $("#subminBtn").click(function()
      {
         // 데이터 검사(누락된 입력값이 있는지 없는지에 대한 여부 확인)
         if( $("#name").val()=="" || $("#ssn1").val()=="" || $("#ssn1").val()=="" 
               || $("#birthday").val()=="" || $("#telephone").val()==""
               || $("#basicPay").val()=="" )
         {
            $("#err").html("필수 입력 항목이 누락되었습니다.");
            $("#err").css("display", "inline");
            return;            //-- submit 액션 처리 중단
         }
         
         // 테스트
         //alert($("#minBasicPay").val());      //-- (X) 아무것도 안나옴
         //alert($("#minBasicPay").text());      //-- (O) 기본급 나옴
         
         
         // 최소 기본급에 대한 유효성 검사
         //if (직급별최소기본급 > 사용자가 입력한 기본급)
         if ( parseInt($("#minBasicPay").text()) > parseInt($("#basicPay").val()) )
         {
            $("#err").html("입력하신 기본급이 최소기본급보다 작습니다.");
            $("#err").css("display", "inline");
            return;            //-- submit 액션 처리 중단
         }
               
         
         // 폼 submit 액션 처리 수행
         $("#employeeForm").submit();
         
      });
      
   });
   
   
   function ajaxRequest()
   {
      //alert("Ajax 요청 및 응답 처리");
      
      // 『$.post()』 / 『$.get()』
      //-- jQuery 에서 Ajax 를 써야 할 경우 지원해주는 함수.
      //   (서버 측에서 요청한 데이터를 받아오는 기능의 함수)
      
      // ※ 이 함수(『$.post()』)의 사용 방법(방식)               // 제이쿼리로 ajax이용하면 예전에 했던 방식에 비해 코드가 확 줄어든다!
      //--  『$.post(요청주소, 전송데이터, 응답액션처리)』
      //    ·요청주소(url)
      //      → 데이터를 요청할 파일에 대한 정보
      //    ·전송데이터(data)
      //      → 서버 측에 요청하는 과정에서 내가 전달할 파라미터
      //    ·응답액션처리(function)
      //      → 응답을 받을 수 있는 함수
      //         기능 처리
      
      // ※ 참고로 data 는 파라미터의 데이터타입을 그대로 취하게 되므로
      //    html 이든, 문자열이든 상관이 없다.
      
      //         ----------- {} json형태!                           ---- result   
      $.post("ajax.action", {positionId : $("#positionId").val() }, function(data)
      {
         $("#minBasicPay").html(data);
      });
      
   }
</script>

</head>
<body>
	<!-- 
ClubCreate.jsp
- 동아리장 - 동아리 개설하기(발의하기)

 -->

	<div class="wrap">
		<!-- 네브 영역 -->
		<div>
			<c:import url="nav.jsp"></c:import>
		</div>

		<!-- 콘텐츠 영역 -->
		<div id="content">
			<h1>[ 동아리 개설 ]</h1>
			<hr>

			<div>
				<form action="clubinsert.action" method="post" id="clubForm">
					<div>
						<p>
							동아리명<input type="text" name="title" id="title"
								placeholder="동아리명 입력">
						</p>
						<p>
							동아리장<input type="text" name="nickname" id="title"
								placeholder="발의자닉넴" disabled="disabled"> 개설예정일<input
								type="text" name="preopendate" id="preopendate"
								placeholder="자동입력" disabled="disabled">
						</p>
						<div>
							카테고리 <select id="category_L_Id" name="category_L_Id">
								<!-- <option selected="selected">대분류</option> -->
								<c:forEach var="category" items="${categoryLList }">
									<option value="${category.category_l_id }">${category.l_cat }</option>
								</c:forEach>
							</select> <select id="category_s_id" name="category_s_id">
								<option value="" selected="selected">소분류</option>

							</select>
						</div>


						<div>

							지역  
							시<select id="region_L_ID" name="region_L_Id">
								<c:forEach var="region" items="${regionLList }">
									<option value="${region.region_l_id }">${region.city}</option>
								</c:forEach>

							</select> 
							
							군/구<select id="region_S_ID" name="region_S_Id">
						

							</select>
						</div>



						<p>
							가입 최대인원 설정<input type="text">
						</p>
						<div>
							<p>내용</p>
							<textarea rows="10" cols="70">
                     </textarea>
						</div>
						<div>
							<%-- <c:import url="beePicCreated.jsp"></c:import> --%>
						</div>

						<div>
							<h5>동아리 가입시 제한조건(옵션)</h5>
							
							<div>
								<span>지역제한</span> 
								<label for="ck1"><input type="radio" id="regionlimit" name="regionlimit" checked>있음</label>
								<label for="ck1"><input type="radio" id="regionlimit" name="regionlimit">없음</label><br><br>
								<span>나이제한</span> 
								<label for="ck2"><input type="radio" id="agelimit" name="agelimit" checked>있음</label>
								<label for="ck2"><input type="radio" id="agelimit" name="agelimit">없음</label><br><br>
								<br>※동아리장이 성인인 경우 10대만 모집하는것은 불가능합니다.</span>
							</div>

							<div>
								<button type="button" class="btn" id="submirBtn">등록</button>
								<button type="button" class="btn" id="cancleBtn" onclick="location.href='동아리개설리스트로'">취소</button>

							</div>

						</div>

					</div>
				</form>
			</div>
		</div>

	</div>




</body>
<script type="text/javascript">


</script>
</html>